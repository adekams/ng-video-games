{"ast":null,"code":"import { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/http.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../searchbar/searchbar.component\";\nconst _c0 = a0 => ({\n  loading: a0\n});\nconst _c1 = (a0, a1) => ({\n  itemsPerPage: 10,\n  currentPage: a0,\n  totalItems: a1\n});\nfunction HomeComponent_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", option_r1);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", option_r1.name, \" \");\n  }\n}\nfunction HomeComponent_ng_container_16_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 24);\n  }\n  if (rf & 2) {\n    const game_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", game_r3 == null ? null : game_r3.background_image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction HomeComponent_ng_container_16_img_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 25);\n  }\n}\nfunction HomeComponent_ng_container_16_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\");\n    i0.ɵɵelement(1, \"img\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r5 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"src\", \"assets/images/platforms/\", item_r5 == null ? null : item_r5.platform == null ? null : item_r5.platform.slug, \".svg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", item_r5 == null ? null : item_r5.platform == null ? null : item_r5.platform.slug);\n  }\n}\nfunction HomeComponent_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_container_16_Template_div_click_1_listener() {\n      const game_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.goToItem(game_r3));\n    });\n    i0.ɵɵelementStart(2, \"a\", 18);\n    i0.ɵɵtemplate(3, HomeComponent_ng_container_16_img_3_Template, 1, 1, \"img\", 19)(4, HomeComponent_ng_container_16_img_4_Template, 1, 0, \"img\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 21)(6, \"a\", 22);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 23);\n    i0.ɵɵtemplate(9, HomeComponent_ng_container_16_a_9_Template, 2, 3, \"a\", 12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const game_r3 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", game_r3 == null ? null : game_r3.background_image);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !(game_r3 == null ? null : game_r3.background_image));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(game_r3 == null ? null : game_r3.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", game_r3 == null ? null : game_r3.parent_platforms);\n  }\n}\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(http, activatedRoute, router) {\n      this.http = http;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.unsubscribe$ = new Subject();\n      this.pending = false;\n      this.maxSize = 5;\n      this.sortOrder = 'desc';\n      this.sortOptions = [{\n        name: 'Name',\n        value: 'name'\n      }, {\n        name: 'Released',\n        value: '-released'\n      }, {\n        name: 'Added',\n        value: '-added'\n      }, {\n        name: 'Created',\n        value: '-created'\n      }, {\n        name: 'Updated',\n        value: '-updated'\n      }, {\n        name: 'Rating',\n        value: '-rating'\n      }, {\n        name: 'Metacritic',\n        value: 'metacritic'\n      }];\n      // namedOptions = this.options.map((name) => ({ name }));\n      this.games = [];\n      // sort: string;\n      this.noImg = 'https://res.cloudinary.com/adenike/image/upload/v1642002314/no-image_iah8ux.png';\n      this.totalItems = 200;\n      this.currentPage = 1;\n      this.collection = this.games;\n    }\n    ngOnInit() {\n      this.sortBy = this.sortBy ? this.sortBy : this.sortOptions[0];\n      // this.options = this.namedOptions;\n      this.activatedRoute.params.subscribe(params => {\n        if (params['game-search']) {\n          this.searchGames(this.sortBy.value, this.currentPage, params['game-search']);\n        } else {\n          this.searchGames(this.sortBy.value, this.currentPage);\n        }\n      });\n    }\n    consoleSort(item) {\n      console.log(item);\n    }\n    searchGames(sort, page, search) {\n      console.log('sorting ', sort);\n      this.pending = true;\n      if (this.sortOrder == 'asc') {\n        sort = /^-/.test(sort) ? sort : `-${sort}`;\n      } else {\n        sort = /^-/.test(sort) ? sort.substring(1) : sort;\n      }\n      this.http.getGames(sort, this.currentPage, search).pipe(takeUntil(this.unsubscribe$)).subscribe(res => {\n        this.games = res.results;\n        this.totalItems = Math.ceil(+res['count'] / res['results'].length);\n        this.currentPage = page;\n        this.pending = false;\n        console.log(this.sortOrder, sort);\n      }, error => {\n        this.pending = false;\n        console.log(error);\n      });\n    }\n    goToItem(item) {\n      return;\n      localStorage.setItem('game', JSON.stringify(item));\n      this.router.navigateByUrl('detail');\n    }\n    nextPage(page) {\n      //get and assign current page\n      this.currentPage = page;\n      this.ngOnInit();\n    }\n    onSortResults(order) {\n      this.sortOrder = order;\n      this.ngOnInit();\n    }\n    ngOnDestroy() {\n      this.unsubscribe$.next(true);\n      this.unsubscribe$.unsubscribe();\n    }\n    static {\n      this.ɵfac = function HomeComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || HomeComponent)(i0.ɵɵdirectiveInject(i1.HttpService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HomeComponent,\n        selectors: [[\"app-home\"]],\n        standalone: false,\n        decls: 21,\n        vars: 13,\n        consts: [[1, \"ui\", \"container\"], [1, \"ui\", \"basic\", \"segment\", 2, \"display\", \"flex\", \"justify-content\", \"space-between\", \"align-items\", \"center\"], [1, \"custom-select\"], [3, \"ngModelChange\", \"change\", \"ngModel\"], [\"ngDefaultControl\", \"\", 3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"ui\", \"basic\", \"segment\", 2, \"padding\", \"15px 0\"], [\"appMargin\", \"\", \"marginR\", \"4\", \"suiDropdown\", \"\", 1, \"ui\", \"pointing\", \"dropdown\", \"link\", \"item\"], [3, \"ngClass\"], [\"suiDropdownMenu\", \"\", 1, \"left\", \"menu\"], [1, \"item\", 3, \"click\"], [1, \"ui\", \"basic\", \"segment\", 2, \"background\", \"transparent !important\", 3, \"ngClass\"], [1, \"ui\", \"four\", \"doubling\", \"cards\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ui\", \"segments\"], [1, \"ui\", \"basic\", \"segment\", \"right\", \"aligned\"], [\"directionLinks\", \"true\", \"autoHide\", \"true\", \"responsive\", \"true\", \"previousLabel\", \"Previous\", \"nextLabel\", \"Next\", \"screenReaderPaginationLabel\", \"Pagination\", \"screenReaderPageLabel\", \"page\", \"screenReaderCurrentLabel\", \"You're on page\", 3, \"pageChange\"], [\"ngDefaultControl\", \"\", 3, \"ngValue\"], [1, \"ui\", \"card\", 3, \"click\"], [1, \"image\"], [3, \"src\", 4, \"ngIf\"], [\"src\", \"https://res.cloudinary.com/adenike/image/upload/v1642002314/no-image_iah8ux.png\", 4, \"ngIf\"], [1, \"content\"], [1, \"primary-color\", \"header\"], [1, \"platforms\", 2, \"margin-top\", \"8px\"], [3, \"src\"], [\"src\", \"https://res.cloudinary.com/adenike/image/upload/v1642002314/no-image_iah8ux.png\"], [1, \"game-platform\", 3, \"src\", \"alt\"]],\n        template: function HomeComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0);\n            i0.ɵɵelement(1, \"app-searchbar\");\n            i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"select\", 3);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function HomeComponent_Template_select_ngModelChange_4_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.sortBy, $event) || (ctx.sortBy = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function HomeComponent_Template_select_change_4_listener() {\n              return ctx.searchGames(ctx.sortBy.value, 5);\n            });\n            i0.ɵɵtemplate(5, HomeComponent_option_5_Template, 2, 2, \"option\", 4);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(6, \"div\", 5)(7, \"a\", 6);\n            i0.ɵɵelement(8, \"i\", 7);\n            i0.ɵɵelementStart(9, \"div\", 8)(10, \"div\", 9);\n            i0.ɵɵlistener(\"click\", function HomeComponent_Template_div_click_10_listener() {\n              return ctx.onSortResults(\"desc\");\n            });\n            i0.ɵɵtext(11, \"Desc\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 9);\n            i0.ɵɵlistener(\"click\", function HomeComponent_Template_div_click_12_listener() {\n              return ctx.onSortResults(\"asc\");\n            });\n            i0.ɵɵtext(13, \"Asc\");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(14, \"div\", 10)(15, \"div\", 11);\n            i0.ɵɵtemplate(16, HomeComponent_ng_container_16_Template, 10, 4, \"ng-container\", 12);\n            i0.ɵɵpipe(17, \"paginate\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"div\", 13)(19, \"div\", 14)(20, \"pagination-controls\", 15);\n            i0.ɵɵlistener(\"pageChange\", function HomeComponent_Template_pagination_controls_pageChange_20_listener($event) {\n              return ctx.nextPage($event);\n            });\n            i0.ɵɵelementEnd()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.sortBy);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.sortOptions);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngClass\", ctx.sortOrder == \"desc\" ? \"large sort alphabet down icon\" : \"large sort alphabet up icon\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(8, _c0, ctx.pending));\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind2(17, 5, ctx.games, i0.ɵɵpureFunction2(10, _c1, ctx.currentPage, ctx.totalItems)));\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, i5.SearchbarComponent],\n        styles: [\".ui.card[_ngcontent-%COMP%]{background:#000;display:flex}.ui.card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:#ffcb9a!important}.ui.card[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%], .ui.cards[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%]{flex:50 0 auto}.ui.card[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%], .ui.cards[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%] > .image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-height:15rem}i.icon[_ngcontent-%COMP%]{color:#fff}.primary-color[_ngcontent-%COMP%]:hover{color:#d9b08c!important}  .selection *{color:#000!important}.platforms[_ngcontent-%COMP%]{display:flex}.platforms[_ngcontent-%COMP%]   .game-platform[_ngcontent-%COMP%]{width:20px;margin-right:10px;aspect-ratio:3/2;object-fit:contain}  .ui.pagination.menu{border:0 solid transparent;background:#1b1c1d;box-shadow:none}  .ui.pagination.menu .item:active,   .ui.pagination.menu .active.item{background:#ffffff14;color:#fff}  .ui.pagination.menu .item.disabled{color:#fff!important}  .ui.pagination.menu .item{background:0 0;color:#ffffffe6}  .ngx-pagination{background:#1e70bf;padding:10px;border-radius:4px}.custom-select[_ngcontent-%COMP%]{min-width:350px;position:relative}select[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;width:100%;font-size:1rem;padding:.675em 6em .675em 1em;background-color:#e1e1e7;border-radius:.25rem;color:#000!important;cursor:pointer}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:initial}.custom-select[_ngcontent-%COMP%]:before, .custom-select[_ngcontent-%COMP%]:after{--size: .3rem;content:\\\"\\\";position:absolute;right:1rem;pointer-events:none}.custom-select[_ngcontent-%COMP%]:before{border-left:var(--size) solid transparent;border-right:var(--size) solid transparent;border-bottom:var(--size) solid black;top:40%}.custom-select[_ngcontent-%COMP%]:after{border-left:var(--size) solid transparent;border-right:var(--size) solid transparent;border-top:var(--size) solid black;top:55%}\"]\n      });\n    }\n  }\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}